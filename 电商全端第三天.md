## 分类页面的数据渲染

1. 获取一级分类数据的函数
     1. 使用ajax请求 数据接口 /category/queryTopCategory
     2. 创建页面标签的模板
     3. 调用模板生成的函数 生成html
     4. 把生成的模板渲染到左侧分类

2. 获取二级分类的函数
     1. 点击了一级分类去获取二级分类
     2. 获取当前点击的一级分类的id
     3. 根据当前一级分的id调用二级分类的APi接口获取二级分类数据
     4. 创建 和 渲染模板
     5. 切换点击a的元素li的active类名

## 商品搜索历史记录的功能

1. 添加搜索记录
  根据输入输入框内容点击搜索添加到本地存储中
  而且要把每次都是的内容都加进去(使用一个数组的方式 追加)
      1.1 给搜索按钮添加点击事件     
      1.2 获取当前文本输入的内容 判断如果用户没有输入提示请输入
      1.3 获取本地存储中已经存储的数据  并且转成一个数组 
          如果有值就使用JSON.parse转换成数组 如果没有值 使用空数组
      1.4 把当前输入文本的内容 往前插入到数组中
      1.4.1 去数组查询一下当前搜索的内容是否存在 存在删除 再往前追加          
      1.4.2 调用删除的方法删掉当前索引的值 删1个
      1.4.3 删掉了之后再往数组的前面追加
      1.5 把数组保存到本地存储中 往本地存储存储值的时候也要转成字符串存储
      1.6 添加完成调用查询的方法查询历史记录 
      1.7 添加完成后清空输入框
2. 查询搜索记录
  查询本地存储中的搜索记录 
  渲染搜索历史列表
    2.1 获取本地存储中已经存储的数据  并且转成一个数组 
    2.2 调用历史记录的模板 传入当前的搜索历史的数据 
        但是数据是一个数组 不是一个对象 把数组转成一个对象再传入模板函数里面

3. 删除搜索记录
  点击x删除当前搜索记录 
  获取当前点击搜索内容去数组中删除
  删除完成后保存到本地存储中
    3.1 给所有的删除x添加点击 tap
    3.2 获取当前点击x的删除的索引
    3.3 获取本地存储中已经存储的数据  并且转成一个数组 
    3.4 把数组中当前要删除的索引的元素删掉
    3.5 删除完成后要把数组重新保存到本地存储中
    3.6 删除完成后要重新查询刷新页面
4. 清空搜索记录
  把整个本地存储的键清空  
    4.1 给清空按钮添加点击事件
    4.2 把整个本地存储的键清空removeItem  不要使用clear
    4.3 清空完成后重新刷新页面



## 总结

1. 分类页面布局
    上
      左 中 右  圣杯布局
    中
      左侧分类
      右侧分类
      flex伸缩布局
    下
2. 分类页面的功能
  1. 左侧 和右侧分类的滑动
  2. 加一个区域滚动
    <div class="mui-scroll-wrapper">
      <div class="mui-scroll">
        <ul>真实ulli内容</ul>
      </div>
    </div>
  3. 设置样式
    给父元素设置相对定位
    父元素高度从父元素继承下来
    main父元素从body继承
  4. 初始化区域滚动
  5. 内容高度没有超过父容器高度 无法滚动（给内容写一个min-height比父元素稍微高1px）
  6. 右侧分类padding不会影响到定位元素的  给里面ul设置padding 因为li没有定位
  7. 设置align-content: flex-start;  让内容对齐方式不要平铺拉伸 而是从顶部对齐
3. 分类数据请求
  1. 请求一级分类 /category/queryTopCategory
  2. API都是在locahost:3000下面的    / 表示根目录  注意/不能漏掉了
    locahost:3000/category/queryTopCategory
  3. 创建模板渲染模板
      模板参数数据必须是对象 已经是对象没有包装一个空对象里面
      如果数据里面有数组需要遍历 
      数组名叫什么each什么 后台一般返回rows数组  each rows
  4. 右侧通过点击了左侧再发请求
      1. 获取左侧点击的分类id(自定义属性绑定在每个a身上)  通过data('id') 专门获取自定义属性的
      2. 根据id请求二级分类数据
      3. 渲染右侧分类
      
4. 商品搜索的布局
    搜索表单  flex布局 （去掉输入框右边圆角 和 按钮左边的圆角）
    搜索历史  使用MUI 卡片
    内容使用列表  右侧添加数字角标等控件
5. 搜索的功能
  1. 添加搜索记录
      1. 点击按钮获取输入值
      2. 非空判断 !search.trim()  先去空格 再 取反
      3. 获取之前的记录如果有就获取(getItem)转成数组JSON.parse 没有使用空数组
      4. 判断 值在数组中存不存在indexOf 存在把值删掉 splice
      5. 不存在或者删掉之后再往数组的前面添加 unshift
      6. 把数据保存到本地存储中 setItem 转成字符串JSON.stringfy()
      7. 重新调用查询刷新
  2. 查询搜索记录
      1. 获取记录的值 转成数组
      2. 创建模板 把数组转成对象传入模板里面
          historyData = {rows:historyData};  把数组存到对象里面 重新覆盖原来的数组
          <!-- var num = 10;
          num = num+10; -->
      3. 调用模板渲染页面
      
  3. 删除搜索记录
      1. 给所有删除x绑定一个索引  根据索引来删除
      2. 给x加事件 获取当前点击x的删除的索引
      3. 获取所有数组 根据当前的索引去删除这个元素 splice(index,1);
      4. 删完后重新保存到存储里面
      5. 重新调用查询刷新
  4. 清空搜索记录
      1. 点击清空的时候把整个键删掉 removeItem() 不要使用clear 会把别人删掉
      2. 重新查询刷新页面

6. 商品列表布局
    1. 表单使用搜索页面的表单
    2. 商品列表使用首页的商品列表
7. 商品列表搜索功能
    1. 拿到当前要搜索的关键字
    2. 在搜索页面点击搜索加完历史记录后 跳转到商品列表并且传入一个参数 当前输入搜索的内容
    3. 在商品列表获取传递过来参数的值
        decodeURI(location.search.split('=')[1])  只能拿1个参数 如果有多个参数 去思考一下
    4. 调用查询商品APi传入当前搜索关键字
      API需要传入一些必传参数page 页码数   pageSize   每页大小 选择传入proName=search
    5. 创建模板 渲染商品列表
    6. 文字不等设置固定显示2行 超出隐藏 设置固定高度 和 行高 只能显示2行 overflow:hidden 隐藏溢出